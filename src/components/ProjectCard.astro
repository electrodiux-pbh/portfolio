---
import { MdCode } from "react-icons/md";

interface Link {
  href: string;
  blank: boolean;
}

interface ProjectCardProps {
  title: string;
  desc: string;
  tech: string[];
  link: Link;
  color: string;
}

const { title, desc, tech, link, color } = Astro.props as ProjectCardProps;

// Define color variants (made this way for tailwind compilation)

const colorVariants = {
  cyan: {
    border: "border-cyan-500",
    text: "group-hover:text-cyan-400",
    bg: "bg-cyan-700",
    hoverBg: "group-hover:bg-cyan-600",
  },
  sky: {
    border: "border-sky-500",
    text: "group-hover:text-sky-400",
    bg: "bg-sky-700",
    hoverBg: "group-hover:bg-sky-600",
  },
  emerald: {
    border: "border-emerald-500",
    text: "group-hover:text-emerald-400",
    bg: "bg-emerald-700",
    hoverBg: "group-hover:bg-emerald-600",
  },
  purple: {
    border: "border-purple-500",
    text: "group-hover:text-purple-400",
    bg: "bg-purple-700",
    hoverBg: "group-hover:bg-purple-600",
  },
  red: {
    border: "border-red-500",
    text: "group-hover:text-red-400",
    bg: "bg-red-700",
    hoverBg: "group-hover:bg-red-600",
  },
};

const variants = colorVariants[color as keyof typeof colorVariants] || colorVariants.cyan;
---

<a
  href={link && link.href}
  class={`block group p-8 bg-slate-950 rounded-2xl border-t-4 ${variants.border} hover:-translate-y-2 transition-all duration-300 shadow-2xl hover:shadow-cyan-900/20`}
  target={link && link.blank ? "_blank" : "_self"}
  rel={link && link.blank ? "noopener noreferrer" : undefined}
>
  <div class="flex justify-between items-start mb-4">
    <h3 class={`text-2xl font-bold text-white ${variants.text} transition-colors`}>
      {title}
    </h3>
    <div class="text-slate-500 group-hover:text-white">
      <MdCode size={24} />
    </div>
  </div>
  <p class="text-slate-400 mb-2 h-20">{desc}</p>
  <div class="flex mb-6 justify-between items-end">
    <div class="flex gap-2 flex-wrap">
      {tech.map((t) => <span class="px-3 py-1 text-sm bg-slate-900 text-cyan-200 rounded-full border border-slate-800">{t}</span>)}
    </div>
  </div>
  {
    link && (
      <div class={`px-4 py-3 text-sm text-center ${variants.bg} text-white rounded-lg ${variants.hoverBg} transition-colors shadow-lg`}>More Information</div>
    )
  }
</a>
